sudo: required
language: python
python:
- '3.6'
addons:
  apt:
    packages:
    - unzip
before_install:
- sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF
- echo "deb http://download.mono-project.com/repo/ubuntu wheezy/snapshots/4.8.1 main"
  | sudo tee /etc/apt/sources.list.d/mono-xamarin.list
- sudo apt-get update
- sudo apt-get install -y clang
- sudo apt-get install -y mono-complete
- sudo wget https://github.com/inkle/ink/releases/download/0.7.4/inklecate_windows_and_linux.zip
- cd $TRAVIS_BUILD_DIR
- unzip inklecate_windows_and_linux.zip
- chmod +x inklecate.exe
install:
- pip install -U setuptools
- pip install pycparser
- pip install codecov
- pip install pytest pytest-cov pytest-asyncio
- pip install -e .
script:
- python -m pytest --cov=./
after_success:
- codecov
deploy:
  provider: pypi
  user: siku2
  password:
    secure: Ojym3yNB1qu9roLSBIm40PgncGK7Ym6nm6yzVA9tWpppRkBIso3JM6kwcf1YPzQr5Vr9qlBe+8X0nb8Rh2sQ4uFtiKKSB9w9xBXyjW+IgAe6l9UYuiI5BYBO6lC/qLmT9fYXfi5HC8H0UDP1UzeZYynaRu/qhB19Qpm39sBgggaffe5EJc7GnOSO479mUiqbYzNA1FwxbxGZ0eD1U6k06N4vzIo88jENJseq6V/QgIAMwFUFO7mxz0O6dlA0OiYa6LKdRb+S4cVUGoVqvTuTToyQ4PZUuH6dQ+ObPh/BfoGrEyv0aX0WFj0W8QuI/3YFlrEbk3gX3QtTeHwoJbvULFgIGaC16lzhvmAetcuY9zFcOe07q/O2Ih2wrQSZfl99DfNtJSA0m6rk3BL2oUHlQzqYT6k2FNZp7qNMZa463JkG+krS15V8euycpUOMwW6UhYBrV2tN42HxW1nmhnqd5XmxcqUJZ7sLEzd07UWRLNlxs7L8fc1fq7SkxQYo6mV6QzU1svDxyEONp2Bnyqo+A7vIpDNX/hKLqs2tBLAA0IxaBKcDfAZf6X6YNf00Gxx2BoxJdr3DXg/gm7VcUV0pyoRasQpGnHxBAE0PUSsPpsETukTlUk1s2kmrLOrytduMbB0KvERWkJduuSOBkHL7rGddO0lCk7AhWld7naW4iRA=
  on:
    tags: true
    branch: master
